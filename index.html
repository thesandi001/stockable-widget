<!DOCTYPE html>
<html ng-app='app'>
    <head>
        <title>stockable</title>
        <link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto:400" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link rel="stylesheet" type="text/css" href="lib/angular-tooltip/angular-tooltips.min.css">
    </head>
    <body ng-controller='todoCtrl'>
        <div class='container'>
            <div class="row">
                <div class="col-xs-4">
                    <div class="left-panel">
                        <div class="stockable-primary font-size-xxxl padding-icon text-center">stockable</div>
                        <ul class="nav nav-tabs">
                            <li ng-class="(tabValue == 'current')?'active':''" ng-click="tabSwitch('current')"><a class="clickable">Current Page</a></li>
                            <li ng-class="(tabValue == 'history')?'active':''" ng-click="tabSwitch('history')"><a class="clickable">History</a></li>
                            <!-- <li ng-class="(tabValue == 'track')?'active':''" ng-click="tabSwitch('track')"><a class="clickable">Track</a></li> -->
                        </ul>
                        <div class="left-panel-scroll">

                            <!-- <input type="text" class="form-control" ng-model="searchValue" placeholder="Search from list"> -->
                            
                            <!-- <div class="text-center" ng-class="(loading)?'show':'hide'"><img src="https://gifimage.net/wp-content/uploads/2017/06/loading-gif-15.gif" height="50"></div> -->
                            
                            <div class="list-el todo-item"  ng-class="(tabValue == 'current')?'show':'hide'" ng-repeat="todo in currentList track by todo.id | orderBy: createdAt" ng-click="load(todo.content)">
                                <!-- <a class='pull-left' title="Add to basket" ng-click='addTobasket(todo)'>
                                <i class='glyphicon glyphicon-plus'></i>
                                </a>&nbsp;&nbsp; -->
                                <!-- <input type='checkbox' ng-model='todo.completed' ng-click='toggleCompleted()'/>&nbsp;&nbsp; -->
                                <span tooltips tooltip-side="bottom" tooltip-size="large" tooltip-class="tooltip-box" tooltip-template="{{ todo.name }}" ng-class="(todo.content == loadValue)? 'stockable-primary': ''">{{ todo.content }}</span>
                                <!-- <a class='btn-remove-todo pull-right' title="Remove from list" ng-click='remove(todo)'>
                                <i class='glyphicon glyphicon-remove'></i>
                                </a> -->
                            </div>

                            <div class="list-el todo-item"  ng-class="(tabValue == 'history')?'show':'hide'" ng-repeat="todo in todoList track by todo.id| orderBy: createdAt" ng-click="load(todo.content)">
                                <!-- <a class='pull-left' title="Add to basket" ng-click='addTobasket(todo)'>
                                <i class='glyphicon glyphicon-plus'></i>
                                </a>&nbsp;&nbsp; -->
                                <!-- <input type='checkbox' ng-model='todo.completed' ng-click='toggleCompleted()'/>&nbsp;&nbsp; -->
                                
                                <!-- <span data-toggle="tooltip" title="{{ todo.name }}">{{ todo.content }}</span> -->
                                <span tooltips tooltip-side="bottom" tooltip-size="large" tooltip-class="tooltip-box" tooltip-template="{{ todo.name }}" ng-class="(todo.content == loadValue)? 'stockable-primary': ''">{{ todo.content }}</span>
                                <!-- <a href="#" tooltips tooltip-side="bottom" tooltip-template="tooltip">Tooltip me</a> -->
                                
                                <a class='btn-remove-todo pull-right' title="Remove from list" ng-click='remove(todo)'>
                                <i class='glyphicon glyphicon-remove'></i>
                                </a>
                            </div>

                            <div class="list-el font-size-xs margin-negetive-left" ng-class="(tabValue == 'history' && todoList.length>1)?'show':'hide'">
                                <div class="col-xs-12 text-center font-color-light-grey" ng-class="(tabValue == 'history' && todoList.length>1)?'show':'hide'" ng-click='removeAll()'>remove all</div>
                                <!-- <div class="col-xs-4 text-center font-color-light-grey" ng-class="(tabValue == 'history' && todoList.length>1)?'show':'hide'" ng-click='selectAll()'>select all</div>
                                <div class="col-xs-4 text-center font-color-light-grey" ng-class="(tabValue == 'history' && (todoList | filter: {completed:true}).length)?'show':'hide'" ng-click='clearSelection()'>clear selection</div> -->
                                <div class="clearfix"></div>
                            </div>

                        </div>
                        <!-- <div class="row">
                            <div class="col-xs-12 text-center"><br>
                                <input type="submit" class="btn btn-100 btn-info" ng-class="(( tabValue == 'current' && (currentList | filter: {completed:true}).length > 1) || ( tabValue == 'history' && (todoList | filter: {completed:true}).length > 1))?'':'disabled'" ng-click="addToBasket()" value="Create smallcase">
                            </div>
                        </div> -->
                    </div>
                </div>
                <div class="col-xs-8" style="margin-left: -7px;">
                    
                    <div class="row margin-br">
                        <div class="col-xs-7">
                            <br>
                            <form ng-submit="load(loadValue)">
                                <input type="text" class="form-control" ng-model="loadValue" placeholder="Search with nse ticker" autofocus="true">
                            </form>
                        </div>
                        <div class="col-xs-5" style="margin-top: 25px;">
                            
                            <span ng-if="nifty.live.price" ng-class="(nifty.live.pnl>=0)?'arrow-profit':'arrow-loss'"></span>

                            <span class="font-size-xxs" ng-if="nifty.live.price" ng-class="(nifty.live.pnl>=0)?'font-color-green':'font-color-red'" tooltips tooltip-side="bottom" tooltip-size="small" tooltip-template="{{ nifty.live.pnl | number : 2 }}">{{ nifty.live.pnl_percent | number : 2 }}%</span>&nbsp;

                            <span class="font-size-xl" ng-if="nifty.live.price" ng-class="(nifty.live.pnl>=0)?'font-color-green':'font-color-red'" tooltips tooltip-side="bottom" tooltip-size="small" tooltip-template="{{ 'Last Close<br>' + (nifty.live.last_close | number : 2) }}">{{ nifty.live.price | number : 2 }}</span>

                        </div>
                    </div>
                    
                    <div class="text-center vertical-center" ng-class="(loading)?'show':'hide'">
                        <img src="https://gifimage.net/wp-content/uploads/2017/06/loading-gif-15.gif" height="50">
                    </div>

                    <div class="text-center vertical-center" ng-class="(widgetError)?'show':'hide'">{{ widgetError }}</div>
                    
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="stock-widget-inner" ng-class="(widgetSrc)?'show':'hide'">

                                <div class="row widget-top-box">
                                    <div class="col-xs-12">
                                        <div class="name">{{ widgetSrc.name }}<span class="ticker">&nbsp;&nbsp;{{ widgetSrc.nse_code }}</span></div>
                                    </div>
                                    <div class="col-xs-12">
                                        <span class="ticker">{{ widgetSrc.warehouse_set.industry }}</span>
                                    </div>                                    
                                </div>

                                <div class="row widget-middle-box">
                                    <div class="col-xs-12">
                                        <div class="row">
                                            <div class="col-xs-7">
                                                <div class="bold margin-br">
                                                    <span class="font-size-xxs">MARKET CAP</span>
                                                    <span class="font-size-m" ng-if="widgetSrc.warehouse_set.market_capitalization">
                                                        {{ widgetSrc.warehouse_set.market_capitalization | number : 2 }} 
                                                        <span class="font-size-xxs" ng-if="widgetSrc.warehouse_set.market_capitalization >= 20000">CR. (Large Cap)</span>
                                                        <span class="font-size-xxs" ng-if="widgetSrc.warehouse_set.market_capitalization < 20000 && widgetSrc.warehouse_set.market_capitalization > 5000">CR. (Mid Cap)</span>
                                                        <span class="font-size-xxs" ng-if="widgetSrc.warehouse_set.market_capitalization < 5000">CR. (Small Cap)</span>
                                                    </span>
                                                    <span ng-if="!widgetSrc.warehouse_set.market_capitalization">N/A</span>
                                                </div>
                                            </div>
                                            
                                            <!-- <span tooltips tooltip-side="bottom" tooltip-size="large" tooltip-class="tooltip-box" tooltip-template="{{ todo.name }}">{{ todo.content }}</span> -->
                                            
                                            <!-- <div class="col-xs-5 text-right border-bottom-dotted" tooltips tooltip-side="bottom" tooltip-size="large" tooltip-template="{{ widgetSrc.stock.live.pnl_percent }}"> -->

                                            <div class="col-xs-5 text-right">
                                                
                                                <span ng-if="widgetSrc.stock.live.price" ng-class="(widgetSrc.stock.live.pnl>=0)?'arrow-profit':'arrow-loss'"></span>

                                                <span class="font-size-xxs" ng-if="widgetSrc.stock.live.price" ng-class="(widgetSrc.stock.live.pnl>=0)?'font-color-green':'font-color-red'" tooltips tooltip-side="bottom" tooltip-size="small" tooltip-template="{{ widgetSrc.stock.live.pnl | number : 2 }}">{{ widgetSrc.stock.live.pnl_percent | number : 2 }}%</span>&nbsp;

                                                <span class="font-size-xl font-color-green" ng-if="widgetSrc.warehouse_set.current_price" ng-class="(widgetSrc.stock.live.pnl>=0)?'font-color-green':'font-color-red'" tooltips tooltip-side="bottom" tooltip-size="small" tooltip-template="{{ 'Last Close<br>' + (widgetSrc.stock.live.last_close | number : 2) }}">{{ widgetSrc.warehouse_set.current_price | number : 2 }}</span>

                                            </div>

                                        </div>                                        
                                        <!-- <div class="details margin-br">                                            
                                            {{ widgetSrc.stock.info.description }} <a href="#" ng-if="widgetSrc.stock.info.descriptionLengthExceeded" ng-click="readMore()">read more</a>
                                        </div> -->
                                    </div>
                                    <div class="col-xs-12">
                                        <div class="row">
                                            <div class="col-xs-12">
                                                
                                                <div class="row margin-br">
                                                    <div class="col-xs-3 text-left">
                                                        <span class="font-size-xxs">52 WK HIGH</span><br>
                                                        <span class="font-size-m">
                                                            <span ng-if="widgetSrc.warehouse_set.high_price">{{ widgetSrc.warehouse_set.high_price | number : 2 }}</span>
                                                            <span ng-if="!widgetSrc.warehouse_set.high_price">-</span>
                                                        </span>
                                                    </div>
                                                    <div class="col-xs-3 text-center">
                                                        <span class="font-size-xxs">ROE</span><br>
                                                        <span class="font-size-m">
                                                            <span ng-if="widgetSrc.warehouse_set.return_on_equity" tooltips tooltip-side="bottom" tooltip-size="small" tooltip-template="{{ '5 YR ROE<br>' + (widgetSrc.warehouse_set.average_return_on_equity_5years | number : 2) }}">{{ widgetSrc.warehouse_set.return_on_equity | number : 2 }}</span>
                                                            <span ng-if="!widgetSrc.warehouse_set.return_on_equity">-</span>
                                                        </span>
                                                    </div>
                                                    <div class="col-xs-3 text-center">
                                                        <span class="font-size-xxs">SALES GR.</span><br>
                                                        <span class="font-size-m">
                                                            <span ng-if="widgetSrc.warehouse_set.sales_growth" tooltips tooltip-side="bottom" tooltip-size="small" tooltip-template="{{ '5 YR SALES GROWTH<br>' + (widgetSrc.warehouse_set.sales_growth_5years | number : 2) }}">{{ widgetSrc.warehouse_set.sales_growth | number : 2 }}%</span>
                                                            <span ng-if="!widgetSrc.warehouse_set.sales_growth">-</span>
                                                        </span>
                                                    </div>
                                                    <div class="col-xs-3 text-right">
                                                        <span class="font-size-xxs">P/E</span><br>
                                                        <span class="font-size-m">
                                                            <span ng-if="widgetSrc.warehouse_set.price_to_earning">{{ widgetSrc.warehouse_set.price_to_earning | number : 2 }}</span>
                                                            <span ng-if="!widgetSrc.warehouse_set.price_to_earning">-</span>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="row margin-br">
                                                    <div class="col-xs-3 text-left">
                                                        <span class="font-size-xxs">52 WK LOW</span><br>
                                                        <span class="font-size-m">
                                                            <span ng-if="widgetSrc.warehouse_set.low_price">{{ widgetSrc.warehouse_set.low_price | number : 2 }}</span>
                                                            <span ng-if="!widgetSrc.warehouse_set.low_price">-</span>
                                                        </span>
                                                    </div>
                                                    <div class="col-xs-3 text-center">
                                                        <span class="font-size-xxs">DIV. YIELD</span><br>
                                                        <span class="font-size-m">
                                                            <span ng-if="widgetSrc.warehouse_set.dividend_yield">{{ widgetSrc.warehouse_set.dividend_yield  | number : 2 }}%</span>
                                                            <span ng-if="!widgetSrc.warehouse_set.dividend_yield">-</span>
                                                        </span>
                                                    </div>
                                                    <div class="col-xs-3 text-center">
                                                        <span class="font-size-xxs">PROFIT GR.</span><br>
                                                        <span class="font-size-m">
                                                            <span ng-if="widgetSrc.warehouse_set.profit_growth" tooltips tooltip-side="bottom" tooltip-size="small" tooltip-template="{{ '5 YR PROFIT GROWTH<br>' + (widgetSrc.warehouse_set.profit_growth_5years | number : 2) }}">{{ widgetSrc.warehouse_set.profit_growth | number : 2 }}%</span>
                                                            <span ng-if="!widgetSrc.warehouse_set.profit_growth">-</span>
                                                        </span>
                                                    </div>
                                                    <div class="col-xs-3 text-right">
                                                        <span class="font-size-xxs">P/B</span><br>
                                                        <span class="font-size-m">
                                                            <span ng-if="widgetSrc.warehouse_set.book_value && widgetSrc.warehouse_set.current_price">{{ (widgetSrc.warehouse_set.current_price/widgetSrc.warehouse_set.book_value) | number : 2 }}</span>
                                                            <span ng-if="!widgetSrc.warehouse_set.book_value || !widgetSrc.warehouse_set.current_price">-</span>
                                                        </span>
                                                    </div>
                                                </div>                                                
                                            </div>                                            
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="font-size-xxs" style="margin-bottom: 8px;">
                                                    PRICE TREND - 
                                                    <span class="clickable" ng-class="(chartPeriod=='months' && chartValue=='1')?'bold stockable-primary':''" ng-click="changeTimePeriod(widgetSrc.id,'months',1)">1MO</span> | 
                                                    <span class="clickable" ng-class="(chartPeriod=='months' && chartValue=='3')?'bold stockable-primary':''" ng-click="changeTimePeriod(widgetSrc.id,'months',3)">3MO</span> | 
                                                    <span class="clickable" ng-class="(chartPeriod=='months' && chartValue=='6')?'bold stockable-primary':''" ng-click="changeTimePeriod(widgetSrc.id,'months',6)">6MO</span> | 
                                                    <span class="clickable" ng-class="(chartPeriod=='years' && chartValue=='1')?'bold stockable-primary':''" ng-click="changeTimePeriod(widgetSrc.id,'years',1)">1YR</span> | 
                                                    <span class="clickable" ng-class="(chartPeriod=='years' && chartValue=='2')?'bold stockable-primary':''" ng-click="changeTimePeriod(widgetSrc.id,'years',2)">2YR</span> | 
                                                    <span class="clickable" ng-class="(chartPeriod=='years' && chartValue=='3')?'bold stockable-primary':''" ng-click="changeTimePeriod(widgetSrc.id,'years',3)">3YR</span> | 
                                                    <span class="clickable" ng-class="(chartPeriod=='years' && chartValue=='5')?'bold stockable-primary':''" ng-click="changeTimePeriod(widgetSrc.id,'years',5)">5YR</span> | 
                                                    <span class="clickable" ng-class="(chartPeriod=='years' && chartValue=='11')?'bold stockable-primary':''" ng-click="changeTimePeriod(widgetSrc.id,'years',11)">MAX</span>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-9">
                                                        <div class="chart-holder"><span id="chart"></span></div>
                                                    </div>
                                                    <div class="col-xs-3">
                                                        <div class="text-right margin-br">
                                                            <span class="font-size-xxs">RETURN</span><br>
                                                            <span class="font-size-m">
                                                                <span ng-if="widgetSrc.warehouse_set.period_return">{{ widgetSrc.warehouse_set.period_return | number : 2 }}%</span>
                                                                <span ng-if="!widgetSrc.warehouse_set.period_return">-</span>
                                                            </span>
                                                        </div>
                                                        <div class="text-right">
                                                            <span class="font-size-xxs">HIGH/LOW</span><br>
                                                            <span class="font-size-m">
                                                                <span>
                                                                    {{ widgetSrc.warehouse_set.period_high | number : 2 }}<br>
                                                                    {{ widgetSrc.warehouse_set.period_low | number : 2 }}
                                                                </span>                                                         
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row widget-bottom-box">
                                    <div class="col-xs-6 text-left">
                                        <a href='https://www.screener.in/company/{{ loadValue }}' target='_blank'><span class="font-color-white">more on {{ loadValue }} >></span></a>
                                    </div>
                                    <div class="col-xs-6 text-right">
                                        powered by <a href="hhttps://www.screener.in" target="_blank"><img src="https://www.screener.in/static/img/logo.png" style="height: 8px;"></a>
                                    </div>
                                </div>

                            </div>                            
                        </div>
                    </div>

                    <div class="row"> <!-- ng-class="(widgetSrc || widgetUrl)?'show':'hide'" -->
                        <div class="col-xs-12 text-center">
                            <!-- <br>
                            <input type="submit" class="btn btn-action btn-buy" value="BUY">
                            <input type="submit" class="btn btn-action btn-sell" value="SELL"> -->
                            <!-- <input type="submit" class="btn btn-action btn-track" value="TRACK"> -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="row">
                <img src="http://ocean.happeningmag.com/wp-content/uploads/2011/02/url.png" height="90" width="100%">
            </div> -->
        </div>
        <script type="text/javascript" src="lib/jquery/jquery-2.1.3.min.js"></script>
        <script type="text/javascript" src="lib/angular/angular.js"></script>
        <script type="text/javascript" src="lib/bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="lib/angular-tooltip/angular-tooltips.min.js"></script>
        <script type="text/javascript" src="app/svg.js"></script>
        <script type="text/javascript" src="app/app.js"></script>
        <script type="text/javascript" src="app/todoCtrl.js"></script>
        <script type="text/javascript" src="app/todoStorage.js"></script>
        <script>
            $(document).ready(function(){
                $('[data-toggle="tooltip"]').tooltip();   
            });
        </script>
    </body>
</html>